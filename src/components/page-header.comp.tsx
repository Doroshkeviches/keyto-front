import React, { FC, useState } from "react";
import { Link, NavLink } from "react-router-dom";
import s from './style.module.scss'
import { useAppSelector } from "storeTypes";
import { userSelector } from "app/main/store/user.selectors";
import clsx from "clsx";

const Header: FC = () => {
  const { user } = useAppSelector(userSelector)
  const [isOpen, setIsOpen] = useState(false)
  console.log(user)
  return (
    <header className={s.header}>
      <Link to='/'>
        <svg width="127" height="29" viewBox="0 0 127 29" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M25.2556 28.4C23.5756 28.4 21.9623 28.0667 20.4156 27.4C18.8956 26.7067 17.2556 25.44 15.4956 23.6L9.05563 16.88V28H3.85563L3.81563 6.8C3.81563 5.44 3.62896 4.44 3.25563 3.8C2.88229 3.13333 2.13563 2.8 1.01563 2.8H0.615625V1.6H5.41563C6.34896 1.6 7.06896 1.76 7.57563 2.08C8.10896 2.4 8.48229 2.93333 8.69563 3.68C8.93563 4.42666 9.05563 5.46667 9.05563 6.8V14.4L15.9756 5.8C16.9623 4.52 18.0156 3.50666 19.1356 2.76C20.2823 1.98667 21.589 1.6 23.0556 1.6H25.8556V3C24.2023 3 22.7756 3.21333 21.5756 3.64C20.4023 4.04 19.389 4.77333 18.5356 5.84L12.5756 13.2L21.8156 22.8C22.8023 23.8933 23.909 24.8533 25.1356 25.68C26.389 26.48 27.4023 26.9333 28.1756 27.04V28C27.3756 28.2667 26.4023 28.4 25.2556 28.4ZM31.55 6.8C31.55 5.44 31.3633 4.44 30.99 3.8C30.6167 3.13333 29.87 2.8 28.75 2.8H28.35V1.6H45.99C48.2567 1.6 49.39 2.66667 49.39 4.8V8.2H48.19C48.19 6.54667 47.7633 5.33333 46.91 4.56C46.0833 3.78667 44.8433 3.4 43.19 3.4H36.75V13.4H47.15V15.2H36.75V26.2H43.59C45.11 26.2 46.3767 25.8667 47.39 25.2C48.4033 24.5067 49.2433 23.32 49.91 21.64L50.99 22.04L49.83 25.2C49.4833 26.16 49.07 26.8667 48.59 27.32C48.11 27.7733 47.3633 28 46.35 28H31.55V6.8ZM62.8944 17.44L55.8144 6.8C55.0144 5.65333 54.1344 4.65333 53.1744 3.8C52.241 2.94667 51.3477 2.48 50.4944 2.4V1.6H54.8544C56.2144 1.6 57.441 2.02667 58.5344 2.88C59.6544 3.73333 60.601 4.77333 61.3744 6L66.8144 14.2L74.5744 1.6H77.1744L68.0944 16.36V28H62.8944V17.44ZM86.5222 3.4H83.6822C82.1889 3.4 81.0422 3.77333 80.2422 4.52C79.4689 5.26667 79.0822 6.49333 79.0822 8.2H77.8822V4.8C77.8822 2.66667 79.0155 1.6 81.2822 1.6H100.082V3.4H91.7222V28H86.5222V3.4ZM113.328 28.8C110.742 28.8 108.435 28.1867 106.408 26.96C104.408 25.7333 102.862 24.0533 101.768 21.92C100.675 19.7867 100.128 17.4133 100.128 14.8C100.128 12.1867 100.675 9.81333 101.768 7.68C102.862 5.54667 104.408 3.86667 106.408 2.64C108.435 1.41333 110.742 0.8 113.328 0.8C115.915 0.8 118.208 1.41333 120.208 2.64C122.208 3.86667 123.755 5.54667 124.848 7.68C125.942 9.81333 126.488 12.1867 126.488 14.8C126.488 17.4133 125.942 19.7867 124.848 21.92C123.755 24.0533 122.208 25.7333 120.208 26.96C118.208 28.1867 115.915 28.8 113.328 28.8ZM113.328 27C115.755 27 117.635 25.9467 118.968 23.84C120.302 21.7067 120.968 18.6933 120.968 14.8C120.968 10.9067 120.302 7.90667 118.968 5.8C117.635 3.66667 115.755 2.6 113.328 2.6C110.902 2.6 109.022 3.66667 107.688 5.8C106.382 7.90667 105.728 10.9067 105.728 14.8C105.728 18.6933 106.382 21.7067 107.688 23.84C109.022 25.9467 110.902 27 113.328 27Z" fill="#481C6A" />
        </svg>

      </Link>
      <div onClick={() => setIsOpen(prev => !prev)} className={s.dropdown}>
        <div>{user?.name}</div>
        <div>
          <svg width="47" height="47" viewBox="0 0 47 47" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M23.5 0C10.528 0 0 10.528 0 23.5C0 36.472 10.528 47 23.5 47C36.472 47 47 36.472 47 23.5C47 10.528 36.472 0 23.5 0ZM23.5 9.4C28.0355 9.4 31.725 13.0895 31.725 17.625C31.725 22.1605 28.0355 25.85 23.5 25.85C18.9645 25.85 15.275 22.1605 15.275 17.625C15.275 13.0895 18.9645 9.4 23.5 9.4ZM23.5 42.3C18.7295 42.3 13.0895 40.373 9.071 35.532C13.0425 32.43 18.048 30.55 23.5 30.55C28.952 30.55 33.9575 32.43 37.929 35.532C33.9105 40.373 28.2705 42.3 23.5 42.3Z" fill="#512D6D" />
          </svg>

        </div>
      </div>
      <div className={clsx(s.dropdownContainer, !isOpen && s.hide)}>
        <Link onClick={() => setIsOpen(false)} to={'/profile'}>Мой профиль</Link>
        <Link onClick={() => setIsOpen(false)} to={'/auth/signin'}>Выйти</Link>

      </div>
    </header>
  );
};

export default Header;